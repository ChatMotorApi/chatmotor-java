<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (15) on Fri Sep 20 19:01:18 CEST 2024 -->
<title>MotorLargeRequestText (ChatMotor API v1.2 BETA - Streamlining OpenAI and ChatGPT Integration with Easy APIs.)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-09-20">
<meta name="description" content="declaration: package: com.chatmotorapi.api, class: MotorLargeRequestText">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="about-language"><a href=https://docs.chatmotor.ai target=_blank><img src=https://docs.chatmotor.ai/img/chatmotor-logo.png width=60 height=48>border=0></a></div>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.chatmotorapi.api</a></div>
<h1 title="Class MotorLargeRequestText" class="title">Class MotorLargeRequestText</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.chatmotorapi.api.MotorLargeRequestText</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="type-name-label">MotorLargeRequestText</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></pre>
<div class="block">Facilitates the creation and execution of large-sized requests for the
 ChatMotor API using a builder pattern for flexible and reliable configuration.
 This class is ideal for scenarios requiring the transmission of large
 volumes of unstructured text (e.g., books, reports). It handles large input
 by splitting it into smaller chunks, submitting them consecutively to the
 ChatMotor, and aggregating individual responses into a final comprehensive
 response.

 <p>The model used in requests can be specified with the `.aiModel` setter on
 the `MotorLargeRequestText` builder. If `.aiModel` is not set, the default
 model used is determined by the environment variable `MOTOR_CHAT_MODEL`. If
 this environment variable is not set, the default model is <a href="MotorDefaultsModels.html#MOTOR_CHAT_MODEL"><code>MotorDefaultsModels.MOTOR_CHAT_MODEL</code></a>.</p>

 <h2>Example:</h2>
 <p>This example processes a large, unstructured text and splits it into
 complete sentences, applying the same query to each portion of the text.
 Note that the input file will be divided into multiple chunks submitted to
 the ChatGPT API, meaning context will be lost between each request and
 response due to the ChatMotor API's context size restrictions.</p>

 <p>For instance, GPT-4 Turbo has a context window of 128k tokens and a
 maximum response size of 4096 tokens. Each response is dedicated to a
 specific portion of the text because we cannot produce a response that
 exceeds 4096 tokens.</p>

 <p>You can define a chunk size using the <a href="#inputChunkSize()"><code>inputChunkSize()</code></a> method. 
 Setting a large chunk size (e.g., 480Kb)
 will process requests faster, but you must use a smaller chunk size if the
 output is expected to exceed 4096 tokens to avoid losing data.</p>
 * <br><br>
 You can add a ProgressListener to the request to track progress using
  <code>.progressListener(ProgressListener progressListener)</code>. 
  See the <a href="https://docs.chatmotor.ai/rest/soft/1.1-BETA/user-guide/User-Guide.html">User Guide</a> for more info.
  
 <p>In this example, we ask GPT-4 to explain the characters of a famous
 literary text. The size of the input file is limited for clarity; the
 purpose is to demonstrate the chunking process and its results.</p>

 <pre><code>
 // Create a ChatMotor instance
 ChatMotor chatMotor = ChatMotor.builder().build();
 
 String systemPrompt = 
     "I will give you a French extract from 'A la Recherche du Temps Perdu.' "
     + "Please explain in English who the characters are, what they are doing, "
     + "and their goals if you can perceive them."
     + "Please add a blank line, then this line: "
     + "--------------------------------------------------------------------------------------------"
     + ", and then a second blank line at the end of your response. "
     + "Do not include the extraction from the book.";
 
 MotorSystemMessage motorSystemMessage = new MotorSystemMessage(systemPrompt);
 
 // Create and configure the request
 MotorLargeRequestText request = MotorLargeRequestText.builder()
     .chatMotor(chatMotor)
     .systemMessage(motorSystemMessage)
     .inputChunkSize(ChunkSize.ofKilobytes(10)) // For clarity of result, we use a small chunk size
     .filePath("/path/to/proust/proust-chapter-1.txt")
     .build();
 
 // Execute the request
 MotorLargeResponse largeResponse = request.execute();
 
 if (largeResponse.isResponseOk()) {
     try (InputStream in = largeResponse.getInputStream()) {
         Files.copy(in, Paths.get("/path/to/proust/proust-chapter-1-response.txt"), StandardCopyOption.REPLACE_EXISTING);
     }
 } else {
     // Check if the response is an OpenAI error and get the details
     OpenAiError openAiError = largeResponse.getOpenAiError();
     OpenAiErrorType errorType = openAiError.getType();
 
     if (errorType != OpenAiErrorType.NO_OPENAI_ERROR) {
         System.out.println("OpenAI returned an error: " + openAiError);
     } else {
         System.out.println("Throwable: " + largeResponse.getThrowable());
     }
 }
</code></pre>
 
 <p>Check the input text at: <a href="https://docs.chatmotor.ai/rest/soft/1.1-BETA/texts/proust-chapter-11.txt">proust-chapter-1.txt</a></p>
 <p>Check the response produced at: <a href="https://docs.chatmotor.ai/rest/soft/1.1-BETA/texts/proust-chapter-1-response.txt">proust-chapter-1-response.txt</a></p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested.class.summary">
<h2>Nested Class Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Nested Classes</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Class</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static class&nbsp;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="MotorLargeRequestText.Builder.html" title="class in com.chatmotorapi.api">MotorLargeRequestText.Builder</a></span></code></th>
<td class="col-last">
<div class="block">Builder class for creating a MotorLargeRequestText instance.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="table-tab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#aiModel()">aiModel</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the AI model to be used in the request.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code><a href="MotorAiOptions.html" title="class in com.chatmotorapi.api">MotorAiOptions</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#aiOptions()">aiOptions</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the AI options to be used in the request.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>static <a href="MotorLargeRequestText.Builder.html" title="class in com.chatmotorapi.api">MotorLargeRequestText.Builder</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#builder()">builder</a></span>()</code></th>
<td class="col-last">
<div class="block">Static method to initiate building a MotorLargeRequestText instance.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="ChatMotor.html" title="class in com.chatmotorapi.api">ChatMotor</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#chatMotor()">chatMotor</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the ChatMotor to be used in the request.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code><a href="MotorLargeResponse.html" title="class in com.chatmotorapi.api">MotorLargeResponse</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#execute()">execute</a></span>()</code></th>
<td class="col-last">
<div class="block">Execute that large request by treating the content as text file.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#filePath()">filePath</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the file path</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code><a href="ChunkSize.html" title="class in com.chatmotorapi.api">ChunkSize</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#inputChunkSize()">inputChunkSize</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the input chunk size</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code><a href="listener/progress/ProgressListener.html" title="interface in com.chatmotorapi.api.listener.progress">ProgressListener</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#progressListener()">progressListener</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the ProgressListener to be used in the request.</div>
</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code><a href="MotorSystemMessage.html" title="class in com.chatmotorapi.api">MotorSystemMessage</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#systemMessage()">systemMessage</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the system prompt</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="chatMotor()">
<h3>chatMotor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ChatMotor.html" title="class in com.chatmotorapi.api">ChatMotor</a></span>&nbsp;<span class="member-name">chatMotor</span>()</div>
<div class="block">Gets the ChatMotor to be used in the request.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="aiOptions()">
<h3>aiOptions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MotorAiOptions.html" title="class in com.chatmotorapi.api">MotorAiOptions</a></span>&nbsp;<span class="member-name">aiOptions</span>()</div>
<div class="block">Gets the AI options to be used in the request.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the AI options to be used in the request</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="aiModel()">
<h3>aiModel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">aiModel</span>()</div>
<div class="block">Gets the AI model to be used in the request.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the AI model to be used in the request</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="systemMessage()">
<h3>systemMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MotorSystemMessage.html" title="class in com.chatmotorapi.api">MotorSystemMessage</a></span>&nbsp;<span class="member-name">systemMessage</span>()</div>
<div class="block">Returns the system prompt</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the system prompt</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="filePath()">
<h3>filePath</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name">filePath</span>()</div>
<div class="block">Returns the file path</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the file path</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="inputChunkSize()">
<h3>inputChunkSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ChunkSize.html" title="class in com.chatmotorapi.api">ChunkSize</a></span>&nbsp;<span class="member-name">inputChunkSize</span>()</div>
<div class="block">Returns the input chunk size</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the input chunk size</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="progressListener()">
<h3>progressListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="listener/progress/ProgressListener.html" title="interface in com.chatmotorapi.api.listener.progress">ProgressListener</a></span>&nbsp;<span class="member-name">progressListener</span>()</div>
<div class="block">Gets the ProgressListener to be used in the request.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the ProgressListener instance</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="builder()">
<h3>builder</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="MotorLargeRequestText.Builder.html" title="class in com.chatmotorapi.api">MotorLargeRequestText.Builder</a></span>&nbsp;<span class="member-name">builder</span>()</div>
<div class="block">Static method to initiate building a MotorLargeRequestText instance.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a new Builder instance</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="execute()">
<h3>execute</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="MotorLargeResponse.html" title="class in com.chatmotorapi.api">MotorLargeResponse</a></span>&nbsp;<span class="member-name">execute</span>()</div>
<div class="block">Execute that large request by treating the content as text file.
 <br>
 
 Files are per default splitted in chunks of 4k tokens, without splitting on sentences.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>MotorResponse The aggregated response combining all individual
         responses from the submitted chunks.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="about-language"><a href=https://docs.chatmotor.ai target=_blank><img src=https://docs.chatmotor.ai/img/chatmotor-logo.png width=60 height=48>border=0></a></div>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>&nbsp;&nbsp;<br><center>ChatMotor API - Streamlining OpenAI and ChatGPT Integration with Easy APIs <br>Copyright &copy; 2024 <a style=color:#E9403E href=https://www.chatmotor.ai font color=#3185DC target=_blank>ChatMotor SAS</a></center></font></small></p>
</footer>
</div>
</div>
</body>
</html>
